
<%

  if @photo.photoable.is_a?(Entry)
    title(@photo.photoable.team.long_name)
    content_for :metas,
                (render :partial => 'layouts/metas', :locals => {
                    :page_title => "#{@photo.photoable.team.name} in the #{@photo.photoable.charge.name}",
                    :description => clean_html(render(:partial => 'entries/entry_description', :locals => {:entry => @photo.photoable})),
                    :og_image_path => image_path(@photo.photo(:original)).split("?")[0]
                })
  else
    title(@photo.photoable.long_name)
    content_for :metas,
                (render :partial => 'layouts/metas', :locals => {
                    :page_title => "Elephant Charge",
                    :description => @photo.photoable.long_name,
                    :og_image_path => image_path(@photo.photo(:original)).split("?")[0]
                })
  end

%>

<div class="container-fluid" data-views="<%= @photo.views%>">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <% if @photo.photoable.is_a?(Entry) %>

              <h5 style="display:inline-block;">
                <a href="<%= team_path(@photo.photoable.team) %>"><%= @photo.photoable.team.name %></a>
                in the
                <a href="<%= charge_path(@photo.photoable.charge) %>"><%= @photo.photoable.charge.long_name %></a>
              </h5>

              <div style="float:right;display: block;">
                <% if params[:return].blank? %>
                  <a href="<%= entry_photos_path(@photo.photoable) %>"><b>Back</b></a>
                <% else %>
                  <a href="<%= params[:return] %>"><b>Back</b></a>
                <% end %>
              </div>
              <div style="margin-bottom:5px;">
                <div id="fb-like" class="fb-like" data-href="<%= request.original_url %>" data-layout="button" data-action="like">
                </div>
                <div class="fb-share-button" data-href="<%= request.original_url %>" data-layout="button">
                </div>
              </div>
          <% else %>
              <h5 style="display:inline-block;">
                <a href="<%= charge_path(@photo.photoable) %>"><%= @photo.photoable.long_name %></a>
              </h5>
              <div style="float:right;display: block;">
                <% if params[:return].blank? %>
                    <a href="<%= charge_photos_path(@photo.photoable) %>"><b>Back</b></a>
                <% else %>
                    <a href="<%= params[:return] %>"><b>Back</b></a>
                <% end %>
              </div>
          <% end %>
        </div>
        <div class="card-block">
          <img style="max-width: 100%" class="rounded mx-auto d-block" src="<%= image_path(@photo.photo(:original)) %>" alt="<%= @photo.caption%>">
        </div>
      </div>

    </div>
  </div>
</div>